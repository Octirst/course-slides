import{f as H,e as f,n as p,g as c,z as N,F as B,t as y,Y as T,O as z,W as P,k as D,A as h,o as k,I as F,J as R,P as V,r as E,p as K}from"../modules/vue-DjIz6fym.js";import{C as I,B as j,D as q,_ as J}from"../index-Bn0ipkaf.js";const O=["title"],U={class:"flex gap-0.2 items-center min-w-16 font-mono mr1"},W={"text-primary":""},X={op50:"","text-sm":""},Y={key:1,op50:"","flex-auto":"",pl1:""},G={relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~"},Q=["min","max"],Z=H({__name:"ClicksSlider",props:{clicksContext:{},readonly:{type:Boolean},active:{type:Boolean,default:!0}},setup(u){const v=u,t=h(()=>v.clicksContext.total),x=h(()=>j(0,v.clicksContext.clicksStart,t.value)),m=h(()=>t.value-x.value+1),a=h({get(){return v.clicksContext.current>t.value?-1:v.clicksContext.current},set(d){v.clicksContext.current=d}}),w=h(()=>q(x.value,t.value+1));function g(){v.readonly||(a.value<0||a.value>t.value)&&(a.value=0)}return(d,s)=>(k(),f("div",{class:p(["flex gap-1 items-center select-none",m.value&&v.clicksContext.isMounted?"":"op50"]),title:`Clicks in this slide: ${m.value}`},[c("div",U,[s[4]||(s[4]=c("div",{class:"i-carbon:cursor-1 text-sm op50"},null,-1)),a.value>=0&&a.value!==N(I)&&u.active?(k(),f(B,{key:0},[s[2]||(s[2]=c("div",{"flex-auto":""},null,-1)),c("span",W,y(a.value),1),s[3]||(s[3]=c("span",{op25:"","text-sm":""},"/",-1)),c("span",X,y(t.value),1)],64)):(k(),f("div",Y,y(t.value),1))]),c("div",G,[(k(!0),f(B,null,T(w.value,o=>(k(),f("div",{key:o,border:"y main","of-hidden":"",relative:"",class:p([o===0?"rounded-l border-l":"",o===t.value?"rounded-r border-r":""]),style:D({width:m.value>0?`${1/m.value*100}%`:"100%"})},[c("div",{absolute:"","inset-0":"",class:p(o<=a.value&&u.active?"bg-primary op15":"")},null,2),c("div",{class:p([+o==+a.value&&u.active?"text-primary font-bold op100 border-primary":"op30 border-main",o===0?"rounded-l":"",o===t.value?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},y(o),3)],6))),128)),z(c("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o),class:p(["range",u.readonly?"pointer-events-none":""]),type:"range",min:x.value,max:t.value,step:1,absolute:"","inset-0":"","z-label":"",op0:"",style:D({"--thumb-width":`${1/(m.value+1)*100}%`}),onMousedown:g,onFocus:s[1]||(s[1]=o=>{var b;return(b=o.currentTarget)==null?void 0:b.blur()})},null,46,Q),[[P,a.value]])])],10,O))}}),ne=J(Z,[["__scopeId","data-v-6259b8e1"]]),ee=["innerHTML"],te=["textContent"],oe=["textContent"],L="slidev-note-fade",C="slidev-note-click-mark",ae=H({__name:"NoteDisplay",props:{class:{},noteHtml:{},note:{},highlight:{type:Boolean,default:!0},placeholder:{},clicksContext:{},autoScroll:{type:Boolean}},emits:["markerDblclick","markerClick"],setup(u,{emit:v}){const t=u,x=v,m=h(()=>{var d;return t.clicksContext!=null&&((d=t.noteHtml)==null?void 0:d.includes(C))}),a=E(null);function w(){var $,A;if(!a.value||!m.value)return;const d=Array.from(a.value.querySelectorAll(`.${C}`)),s=new Map,o=new Map;let b=0;for(const i of d){const n=Number(i.dataset.clicks);s.set(i,n);let l=i,e=i.parentElement;for(;e&&l!==a.value;)o.has(e)||o.set(e,[[null,b]]),o.get(e).push([l,n]),l=e,e=e.parentElement;b=n}const S=new Map;for(const[i,n]of o){let l=!1,e=0;for(const r of Array.from(i.childNodes)){let _=!1;for(;r===(($=n[e+1])==null?void 0:$[0]);)_=!0,e++;if(_)continue;let M=r;if(r.nodeType===3){if(!((A=r.textContent)!=null&&A.trim()))continue;M=document.createElement("span"),M.textContent=r.textContent,i.insertBefore(M,r),r.remove()}l||(l=e===0),S.set(M,n[e][1])}l||(n[0][1]=-1)}return i=>{const n=t.highlight;for(const[l,e]of o)l.classList.toggle(L,n&&!e.some(([r,_])=>_===i));for(const[l,e]of S)l.classList.toggle(L,n&&e!==i);for(const[l,e]of s)l.classList.remove(L),l.classList.toggle(`${C}-past`,n&&e<i),l.classList.toggle(`${C}-active`,n&&e===i),l.classList.toggle(`${C}-next`,n&&e===i+1),l.classList.toggle(`${C}-future`,n&&e>i+1),l.ondblclick=r=>{n&&(x("markerDblclick",r,e),!r.defaultPrevented&&(t.clicksContext.current=e,r.stopPropagation(),r.stopImmediatePropagation()))},l.onclick=r=>{n&&x("markerClick",r,e)},n&&t.autoScroll&&e===i&&l.scrollIntoView({block:"center",behavior:"smooth"})}}const g=E();return F(()=>[t.noteHtml,t.highlight],()=>{K(()=>{g.value=w()})},{immediate:!0}),R(()=>{w()}),V(()=>{var s,o;const d=((s=t.clicksContext)==null?void 0:s.current)??I;(o=g.value)==null||o.call(g,d)}),(d,s)=>u.noteHtml?(k(),f("div",{key:0,ref_key:"noteDisplay",ref:a,class:p(["prose overflow-auto outline-none slidev-note",[t.class,m.value?"slidev-note-with-clicks":""]]),innerHTML:u.noteHtml},null,10,ee)):u.note?(k(),f("div",{key:1,class:p(["prose overflow-auto outline-none slidev-note",t.class])},[c("p",{textContent:y(u.note)},null,8,te)],2)):(k(),f("div",{key:2,class:p(["prose overflow-auto outline-none opacity-50 italic select-none slidev-note",t.class])},[c("p",{textContent:y(t.placeholder||"No notes.")},null,8,oe)],2))}});export{ne as C,ae as _};
